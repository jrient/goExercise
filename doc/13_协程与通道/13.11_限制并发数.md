## 限制并发数

---

可以很轻松的实现一个带缓冲的通道，它的容量是并发请求的最大数目。下面的示例 [max_tasks.go](./src/max_tasks.go) 没做任何事情，它包含了下列技巧：不超过 `MAXREQS` 的请求将被处理并且是同时处理，因为当通道 `sem` 的缓冲区全被占用时，函数 `handle` 被阻塞，直到缓冲区中的请求被执行完成并且从 `sem` 中删除之前，不能执行其他的请求。`sem` 就像一个 `semaphore` （信号量），表示一个在一定条件的程序中的一个标志变量的技术术语：由此得名。

通过这种方式，程序中的协程通过使用缓冲通道（这个通道作为一个 `semaphore` 被使用）来调整资源的使用，实现了对内存等有限资源的优化。